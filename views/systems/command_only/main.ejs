<!DOCTYPE html>

<h1>Pebble: Command Only Client System</h1>
<p>To get started press ctrl + j in chrome, and make sure you are in the console section.</p>

<script>
    
    var peb = (function(){
       
    // call post the js console to post to dirrectly post to server
    // ex : postIt({action: 'foo'});
    var post = function (data, done) {

        // new xhr
        var http = new XMLHttpRequest();

        done = done === undefined ? function () {} : done;

        // open a post
        http.open('POST', '/');

        //Send the proper header information along with the request
        http.setRequestHeader("Content-type", "application/json");

        // what to do on state change
        http.onreadystatechange = function () {


            if (this.readyState === 4) {


                //console.log(this.response);

                done(JSON.parse(this.response));

            }

        };

        // send it out
        http.send(JSON.stringify(data));

        return 'sent post...';

    },
    
    // the control function
    control = function(){
            
            
        };
        
        control.post = function(obj){
            
            post(obj, function(response){
                
                console.log(response);
                
            })
            
        };
        
        
        return control;
        
    }());
                                                
</script>

<% include ./parts/foot.ejs %>

</body>
</html>