<% include ./parts/head.ejs %>
<% include ./parts/nav.ejs %>
<% include ./parts/pebblebar.ejs %>


<h1>Shops:</h1>

<div id="shops_shoplist">
</div>

<script>

    // reserve_client pebble app
    var pebbleApp = (function(){
       
        // client data that goes to the server
        var clientData = {
            
            pebbleAppName : 'shops_client',
            shopPage : 0  
        },
            
        shopList = [];
        
        // public API
        return {
        
            // pebble app needs access to this
            clientData : clientData,
            
            // before POST
            before : function(){
                
                
            },
            
            // after POST
            after : function(response){
             
                shopList = response.shopPage;
                
                this.drawShoplist();
            },
            
            // draw the current list of shops
            drawShoplist : function(){
                
                var i = 0, len = shopList.length, html='<div>';
                
                console.log( shopList[i].shopName );
                
                while(i < len){
                    
                    html += '<div> <p> shop name: ' + shopList[i].shopName + 
                        '; shop id: ' + shopList[i].id + 
                        '; weight: ' + shopList[i].weight + 
                        '; <\/p> <\/div>';
                    
                    i++;
                }
                
                document.getElementById('shops_shoplist').innerHTML = html + '<\/div>';
                
            }
            
        }
        
    }());

    
</script>